<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Thomas Quinn" />

<meta name="date" content="2016-09-27" />

<title>Advanced Topics for the exprso Package</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Advanced Topics for the exprso Package</h1>
<h4 class="author"><em>Thomas Quinn</em></h4>
<h4 class="date"><em>2016-09-27</em></h4>



<div id="foreword" class="section level2">
<h2>Foreword</h2>
<p>Although this vignette contains a lot of exciting stuff, to get the most out of it, we recommend first reading the companion vignette, “An Introduction to the <em>exprso</em> Package”, which introduces many of the core features upon which this package depends. Then, once you become familiar with the fundamental modules of this package, read this vignette to learn more about the true power and flexibility of <em>exprso</em>.</p>
</div>
<div id="tidy-learning" class="section level2">
<h2>Tidy learning</h2>
<p>In this first section, we will show how you can combine tidy principles with the <em>exprso</em> package to execute machine learning even faster than before. We do this using the <em>magrittr</em> package which provides two key functions: <code>%&gt;%</code> and <code>%T&gt;%</code>. Both of these functions pass on the result from a prior function call to the first argument of the next function call, an operation known as <em>piping</em>. However, the latter differs from the former in that it “branches out” and does not pass on its own result. Instead, <code>%T&gt;%</code> pipes along the result from the previous function. This makes <code>%T&gt;%</code> useful for “side-chain” tasks like plotting.</p>
<p>To begin, we load the necessary packages, including the <em>golubEsets</em> data package used extensively in the introductory vignette.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(exprso)
<span class="kw">library</span>(magrittr)
<span class="kw">library</span>(golubEsets)</code></pre></div>
<p>Now, we will see how piping can help save you time, all while making your code more readable. Here, we use the <code>%&gt;%</code> function to pre-process the Golub dataset and split it into a training and test set. Since the data object forks at the level of the <code>split</code> method (yielding two <code>ExprsArray</code> objects from one), it makes sense to break the pipe cascade there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">splitSets &lt;-<span class="st"> </span><span class="kw">data</span>(Golub_Merge) %&gt;%<span class="st"> </span>get %&gt;%
<span class="st">  </span><span class="kw">arrayExprs</span>(<span class="dt">colBy =</span> <span class="st">&quot;ALL.AML&quot;</span>, <span class="dt">include =</span> <span class="kw">list</span>(<span class="st">&quot;ALL&quot;</span>, <span class="st">&quot;AML&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">modFilter</span>(<span class="dv">20</span>, <span class="dv">16000</span>, <span class="dv">500</span>, <span class="dv">5</span>) %&gt;%<span class="st"> </span>modTransform %&gt;%<span class="st"> </span>modNormalize %&gt;%
<span class="st">  </span><span class="kw">splitSample</span>(<span class="dt">percent.include =</span> <span class="dv">67</span>)</code></pre></div>
<p>Next, we use the <code>%&gt;%</code> function to pull the training set from the <code>split</code> method result (via the <code>trainingSet</code> function) and pipe it through a chain of feature selection and classifier construction methods. Similar to <code>trainingSet</code>, the <code>testSet</code> function (or, equivalently, the <code>validationSet</code> function) will extract the test set from the <code>split</code> method result.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">fsStats</span>(<span class="dt">how =</span> <span class="st">&quot;t.test&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">fsPrcomp</span>(<span class="dt">top =</span> <span class="dv">10</span>) %T&gt;%
<span class="st">  </span><span class="kw">plot</span>(<span class="dt">c =</span> <span class="dv">0</span>) %&gt;%
<span class="st">  </span>buildSVM %&gt;%
<span class="st">  </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %T&gt;%
<span class="st">  </span>calcStats</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --><img src="data:image/png;base64,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" /><!-- --></p>
<p>Piping can expedite ensemble classifier construction as well. Here, we use the <code>%&gt;%</code> function in conjunction with <code>plMonteCarlo</code> to (a) split the <em>training set</em> across 10 bootstraps, (b) perform recursive feature elimination on each <em>training subset</em>, (c) construct an LDA classifier, and (d) deploy the classifier on an <em>internal validation set</em>. Then, we select the best three performing classifiers, regardless of the bootstrap origin, by passing the results through <code>pipeUnboot</code> and <code>pipeFilter</code> (see <code>?pipeUnboot</code> and <code>?pipeFilter</code> to learn more about how the “boot” column changes <code>pipeFilter</code> behavior). Last, we build a classifier ensemble and deploy it on the <em>test set</em>. For code clarity, we define the argument handler functions <code>ctrlSplitSet</code>, <code>ctrlFeatureSelect</code>, and <code>ctrlGridSearch</code> outside of the pipe cascade.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ss &lt;-<span class="st"> </span><span class="kw">ctrlSplitSet</span>(<span class="dt">func =</span> <span class="st">&quot;splitSample&quot;</span>, <span class="dt">percent.include =</span> <span class="dv">67</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
fs &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsPathClassRFE&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>)
gs &lt;-<span class="st"> </span><span class="kw">ctrlGridSearch</span>(<span class="dt">func =</span> <span class="st">&quot;plGrid&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;buildLDA&quot;</span>)

pred &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">plMonteCarlo</span>(<span class="dt">B =</span> <span class="dv">10</span>, <span class="dt">ctrlSS =</span> ss, <span class="dt">ctrlFS =</span> fs, <span class="dt">ctrlGS =</span> gs) %&gt;%
<span class="st">  </span>pipeUnboot %&gt;%
<span class="st">  </span><span class="kw">pipeFilter</span>(<span class="dt">colBy =</span> <span class="st">&quot;valid.auc&quot;</span>, <span class="dt">top =</span> <span class="dv">3</span>) %&gt;%
<span class="st">  </span>buildEnsemble %&gt;%
<span class="st">  </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %T&gt;%
<span class="st">  </span>calcStats</code></pre></div>
</div>
<div id="clustering-before-classifying" class="section level2">
<h2>Clustering before classifying</h2>
<p>The <em>exprso</em> package also includes a wrapper function for quickly clustering subjects based on feature data, named <code>modCluster</code>. In terms of the expected arguments, this function works analogously to the feature selection and classification methods, using the familiar <code>how</code> argument to toggle between one of seven clustering algorithms. The <code>modCluster</code> function returns an <code>ExprsArray</code> object with updated <code>@annot</code> slot that contains the results of clustering, and typically would run after splitting but before feature selection.</p>
<p>Since there are so many ways you could cluster within a classification pipeline, we will show here the simplest example and leave it up to you to experiment on your own. Who knows, you might find that perfect way of subdividing your data that maximizes classification accuracy! In this example, we use the <code>%&gt;%</code> function to carve the <em>training set</em> into two clusters, and then use just one of the clustered groups to build an artificial neural network. Although this example is a bit absurd since it sacrifices power so blatantly, it should help illustrate how <code>modCluster</code> works in the context of other modules.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">modCluster</span>(<span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;hclust&quot;</span>, <span class="dt">k =</span> <span class="dv">2</span>) %&gt;%
<span class="st">  </span><span class="kw">modSubset</span>(<span class="dt">colBy =</span> <span class="st">&quot;cluster&quot;</span>, <span class="dt">include =</span> <span class="dv">1</span>) %&gt;%
<span class="st">  </span><span class="kw">fsMrmre</span>(<span class="dt">top =</span> <span class="dv">0</span>) %&gt;%
<span class="st">  </span><span class="kw">buildANN</span>(<span class="dt">top =</span> <span class="dv">20</span>, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">decay =</span> <span class="dv">1</span>, <span class="dt">maxit =</span> <span class="dv">100</span>) %&gt;%
<span class="st">  </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %T&gt;%
<span class="st">  </span>calcStats</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Next, we show how you can cluster by cases <em>only</em>, using a small trick that works just as well for any data annotation. In this example, we use the <code>conjoin</code> function to undo the <code>subset</code>. Note, however, that using <code>conjoin</code> after feature selection will throw an error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">clusteredCases &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">modSubset</span>(<span class="dt">colBy =</span> <span class="st">&quot;defineCase&quot;</span>, <span class="dt">include =</span> <span class="st">&quot;Case&quot;</span>) %&gt;%
<span class="st">  </span>modCluster %&gt;%
<span class="st">  </span><span class="kw">modSubset</span>(<span class="dt">colBy =</span> <span class="st">&quot;cluster&quot;</span>, <span class="dt">include =</span> <span class="dv">1</span>) %&gt;%
<span class="st">  </span><span class="kw">conjoin</span>(<span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">            </span><span class="kw">modSubset</span>(<span class="dt">colBy =</span> <span class="st">&quot;defineCase&quot;</span>, <span class="dt">include =</span> <span class="st">&quot;Control&quot;</span>))</code></pre></div>
</div>
<div id="importing-gse-files" class="section level2">
<h2>Importing GSE files</h2>
<p>The NCBI GEO hosts files in GSE or GDS format, the latter of which exists as a curated version the former. These GDS data files easily convert to an <code>ExpressionSet</code> (abbreviated <code>eSet</code>) object using the <code>GDS2eSet</code> function available from the <em>GEOquery</em> package. However, not all GSE data files have a corresponding GDS data file available. To convert GSE data files into eSet objects, <em>exprso</em> provides the <code>GSE2eSet</code> function. Below, we download a GSE file and import it as an <code>ExprsArray</code> object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data.gse &lt;-<span class="st"> </span>GEOquery::<span class="kw">getGEO</span>(<span class="st">&quot;GSE5847&quot;</span>, <span class="dt">GSEMatrix =</span> <span class="ot">FALSE</span>)
data.eset &lt;-<span class="st"> </span><span class="kw">GSE2eSet</span>(data.gse)
data.eset@phenoData@data</code></pre></div>
</div>
<div id="deep-learning" class="section level2">
<h2>Deep learning</h2>
<p>Deep learning in <em>exprso</em> does not differ much from the other approaches to classification. However, supplying arguments to the deep learning build wrapper (via <code>h2o</code>) does get a little cumbersome.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">buildDNN</span>(<span class="dt">top =</span> <span class="dv">0</span>,
           <span class="dt">activation =</span> <span class="st">&quot;TanhWithDropout&quot;</span>, <span class="co"># or 'Tanh'</span>
           <span class="dt">input_dropout_ratio =</span> <span class="fl">0.2</span>, <span class="co"># % of inputs dropout</span>
           <span class="dt">hidden_dropout_ratios =</span> <span class="kw">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>), <span class="co"># % for nodes dropout</span>
           <span class="dt">balance_classes =</span> <span class="ot">TRUE</span>,
           <span class="dt">hidden =</span> <span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">50</span>,<span class="dv">50</span>), <span class="co"># three layers of 50 nodes</span>
           <span class="dt">epochs =</span> <span class="dv">100</span>) %&gt;%
<span class="st">  </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %T&gt;%
<span class="st">  </span>calcStats</code></pre></div>
<p>One important difference with <code>buildDNN</code> is that you have to take the time to manually clear out the old classification models from RAM. Unlike with other models, the <code>ExprsModel</code> object does not actually store the deep neural net, but rather just holds a “link” to the classifier. The actual classifier is stored outside of R to allow for parallelization and improved performance.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Frees RAM for more learning</span>
h2o::<span class="kw">h2o.shutdown</span>()</code></pre></div>
<p>When embedding <code>buildDNN</code> within a grid-search, we run into the difficulty that most <code>buildDNN</code> arguments require a numeric vector as input. These vector inputs typically correspond to a unique value for each layer of the deep neural net. We can provide <code>plGrid</code> a vector argument by wrapping it in a list. Take note that this approach of providing argument vectors in a list would also work for other arguments (e.g., <code>top</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pl &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">plGrid</span>(<span class="dt">array.valid =</span> <span class="kw">testSet</span>(splitSets), <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;buildDNN&quot;</span>, <span class="dt">fold =</span> <span class="ot">NULL</span>,
         <span class="dt">activation =</span> <span class="st">&quot;TanhWithDropout&quot;</span>, <span class="co"># or 'Tanh'</span>
         <span class="dt">input_dropout_ratio =</span> <span class="fl">0.2</span>, <span class="co"># % of inputs dropout</span>
         <span class="dt">hidden_dropout_ratios =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>)), <span class="co"># % for nodes dropout</span>
         <span class="dt">balance_classes =</span> <span class="ot">TRUE</span>,
         <span class="dt">hidden =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">50</span>,<span class="dv">50</span>)), <span class="co"># three layers of 50 nodes</span>
         <span class="dt">epochs =</span> <span class="dv">100</span>)</code></pre></div>
<p>Below, we show a more elaborate deep learning grid-search. For details on these arguments, see <code>?h2o::h2o.deeplearning</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pl &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">plGrid</span>(<span class="dt">array.valid =</span> <span class="kw">testSet</span>(splitSets), <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;buildDNN&quot;</span>, <span class="dt">fold =</span> <span class="ot">NULL</span>,
         <span class="dt">activation =</span> <span class="kw">c</span>(<span class="st">&quot;Rectifier&quot;</span>,
                        <span class="st">&quot;TanhWithDropout&quot;</span>), <span class="co"># or 'Tanh'</span>
         <span class="dt">input_dropout_ratio =</span> <span class="kw">c</span>(<span class="fl">0.2</span>,
                                 <span class="fl">0.5</span>,
                                 <span class="fl">0.8</span>), <span class="co"># % of inputs dropout</span>
         <span class="dt">hidden_dropout_ratios =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span>),
                                      <span class="kw">c</span>(<span class="fl">0.2</span>,<span class="fl">0.2</span>,<span class="fl">0.2</span>)), <span class="co"># % for nodes dropout</span>
         <span class="dt">balance_classes =</span> <span class="ot">TRUE</span>,
         <span class="dt">hidden =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">50</span>,<span class="dv">50</span>),
                       <span class="kw">c</span>(<span class="dv">100</span>,<span class="dv">100</span>,<span class="dv">100</span>),
                       <span class="kw">c</span>(<span class="dv">200</span>,<span class="dv">200</span>,<span class="dv">200</span>)), <span class="co"># three layers of 50 nodes</span>
         <span class="dt">epochs =</span> <span class="kw">c</span>(<span class="dv">100</span>))</code></pre></div>
<p>Keep in mind that deep learning is a very RAM hungry task. If you’re not careful, you’ll run out RAM and throw an error. Remember to call <code>h2o::h2o.shutdown()</code> whenever you finish deep learning!</p>
</div>
<div id="perfect-cross-validation" class="section level2">
<h2>Perfect cross-validation</h2>
<p>The “perfect” cross-validation pipeline would have two layers of cross-validation such that the <em>outer-layer</em> divides the data <em>without</em> feature selection while the <em>inner-layer</em> divides the data <em>with</em> feature selection. We can achieve this in <em>exprso</em> by embedding a <code>plNested</code> pipeline within another <code>plNested</code> pipeline.</p>
<p>If you use this approach, you should not need a test set as long as you calculate classification accuracy in a way that respects the independence of each fold. In other words, if you opt out of a <em>test set</em>, you must never let a <em>validation set</em> accuracy guide the selection of which training sets to use when calculating the final classification accuracy.</p>
<p>For illustrative purposes, we perform “perfect” cross-validation using support vector machines built across a single set of parameters. Extending this pipeline to a larger parameter grid-search will require a cautious analysis of the results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fs.inner &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsStats&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;t.test&quot;</span>)
gs.inner &lt;-<span class="st"> </span><span class="kw">ctrlGridSearch</span>(<span class="dt">func =</span> <span class="st">&quot;plGrid&quot;</span>, <span class="dt">top =</span> <span class="dv">3</span>, <span class="dt">how =</span> <span class="st">&quot;buildSVM&quot;</span>, <span class="dt">fold =</span> <span class="ot">NULL</span>)

fs.outer &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsNULL&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>)
gs.outer &lt;-<span class="st"> </span><span class="kw">ctrlGridSearch</span>(<span class="dt">func =</span> <span class="st">&quot;plNested&quot;</span>, <span class="dt">fold =</span> <span class="dv">2</span>, <span class="dt">ctrlFS =</span> fs.inner, <span class="dt">ctrlGS =</span> gs.inner)

pl &lt;-<span class="st"> </span><span class="kw">data</span>(Golub_Merge) %&gt;%<span class="st"> </span>get %&gt;%
<span class="st">  </span><span class="kw">arrayExprs</span>(<span class="dt">colBy =</span> <span class="st">&quot;ALL.AML&quot;</span>, <span class="dt">include =</span> <span class="kw">list</span>(<span class="st">&quot;ALL&quot;</span>, <span class="st">&quot;AML&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">modFilter</span>(<span class="dv">20</span>, <span class="dv">16000</span>, <span class="dv">500</span>, <span class="dv">5</span>) %&gt;%<span class="st"> </span>modTransform %&gt;%<span class="st"> </span>modNormalize %&gt;%
<span class="st">  </span><span class="kw">plNested</span>(<span class="dt">fold =</span> <span class="dv">2</span>, <span class="dt">ctrlFS =</span> fs.outer, <span class="dt">ctrlGS =</span> gs.outer)</code></pre></div>
</div>
<div id="multi-class-classification" class="section level2">
<h2>Multi-class classification</h2>
<p>The <em>exprso</em> package also contains a growing number of methods made specifically for dealing with multi-class data. For example, all of the <code>build</code> methods available for binary classification also work for multi-class classification. In addition, <em>exprso</em> also contains some feature selection methods that work for binary and multi-class data alike.</p>
<p>Below, we use mock multi-class data to illustrate a simple multi-class classification pipeline.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">splitSets &lt;-<span class="st"> </span><span class="kw">data</span>(arrayMulti) %&gt;%<span class="st"> </span>get %&gt;%
<span class="st">  </span><span class="kw">splitStratify</span>(<span class="dt">percent.include =</span> <span class="dv">67</span>, <span class="dt">colBy =</span> <span class="st">&quot;sex&quot;</span>)

<span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span>fsANOVA %&gt;%
<span class="st">  </span>buildNB %&gt;%<span class="st"> </span><span class="co"># any build method can become multi with 1-vs-all</span>
<span class="st">  </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %T&gt;%
<span class="st">  </span>calcStats</code></pre></div>
<p>All the pipelines developed for binary classification work equally well for multi-class classification. However, not all feature selection methods work for multi-class data. As long as you choose a valid multi-class feature selection method, <code>plGrid</code>, <code>plMonteCarlo</code>, and <code>plNested</code> will work without fail.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fs &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsANOVA&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>)
gs &lt;-<span class="st"> </span><span class="kw">ctrlGridSearch</span>(<span class="dt">func =</span> <span class="st">&quot;plGrid&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;buildRF&quot;</span>, <span class="dt">fold =</span> <span class="dv">10</span>)

pl &lt;-<span class="st"> </span><span class="kw">trainingSet</span>(splitSets) %&gt;%
<span class="st">  </span><span class="kw">plNested</span>(<span class="dt">fold =</span> <span class="dv">2</span>, <span class="dt">ctrlFS =</span> fs, <span class="dt">ctrlGS =</span> gs) %T&gt;%
<span class="st">  </span><span class="kw">calcNested</span>(<span class="dt">colBy =</span> <span class="st">&quot;valid.acc&quot;</span>)</code></pre></div>
<pre><code>## Warning in (function (array, top, how, fold, ...) : Insufficient subjects
## for plCV v-fold cross-validation. Performing LOOCV instead.</code></pre>
<pre><code>## Warning in (function (array, top, how, fold, ...) : Insufficient subjects
## for plCV v-fold cross-validation. Performing LOOCV instead.</code></pre>
<p>Note that <em>exprso</em> does not yet support multi-class classifier ensembles. Sorry!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">testthat::<span class="kw">expect_error</span>(
  pl %&gt;%<span class="st"> </span>buildEnsemble %&gt;%
<span class="st">    </span><span class="kw">predict</span>(<span class="kw">testSet</span>(splitSets)) %&gt;%
<span class="st">    </span>calcStats
)</code></pre></div>
<p>A special <code>plGrid</code> variant, called <code>plGridMulti</code>, is also available for multi-class data. This variant uses <em>1-vs-all feature selection</em> instead of multi-class feature selection. In this implementation, 1-vs-all feature selection occurs just prior to 1-vs-all classifier construction. As such, each individual <code>ExprsMachine</code> within the <code>ExprsModule</code> will have its own unique feature selection history to pass on to the test set during classifier deployment. For <code>plGridMulti</code>, the 1-vs-all feature selection is managed just like the other <code>pl</code> functions, using the <code>ctrlFeatureSelect</code> argument handler.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fs &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsStats&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;t.test&quot;</span>)

pl &lt;-<span class="st"> </span><span class="kw">plGridMulti</span>(<span class="kw">trainingSet</span>(splitSets), <span class="kw">testSet</span>(splitSets), <span class="dt">ctrlFS =</span> fs, <span class="dt">top =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>),
                  <span class="dt">how =</span> <span class="st">&quot;buildSVM&quot;</span>, <span class="dt">kernel =</span> <span class="kw">c</span>(<span class="st">&quot;linear&quot;</span>, <span class="st">&quot;radial&quot;</span>), <span class="dt">gamma =</span> <span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>))</code></pre></div>
<p>However, <code>plGridMulti</code> does not have built-in <code>plCV</code> support. To run <code>plGridMulti</code> with cross-validation, use <code>plNested</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fs.inner &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsStats&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>, <span class="dt">how =</span> <span class="st">&quot;t.test&quot;</span>)
fs.outer &lt;-<span class="st"> </span><span class="kw">ctrlFeatureSelect</span>(<span class="dt">func =</span> <span class="st">&quot;fsNULL&quot;</span>, <span class="dt">top =</span> <span class="dv">0</span>)
gs.outer &lt;-<span class="st"> </span><span class="kw">ctrlGridSearch</span>(<span class="dt">func =</span> <span class="st">&quot;plGridMulti&quot;</span>, <span class="dt">ctrlFS =</span> fs.inner, <span class="dt">top =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>),
                     <span class="dt">how =</span> <span class="st">&quot;buildSVM&quot;</span>, <span class="dt">kernel =</span> <span class="kw">c</span>(<span class="st">&quot;linear&quot;</span>, <span class="st">&quot;radial&quot;</span>), <span class="dt">gamma =</span> <span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>))

pl &lt;-<span class="st"> </span><span class="kw">plNested</span>(<span class="kw">trainingSet</span>(splitSets), <span class="dt">fold =</span> <span class="dv">2</span>,
               <span class="dt">ctrlFS =</span> fs.outer, <span class="dt">ctrlGS =</span> gs.outer)</code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
